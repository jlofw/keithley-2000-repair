## Built-in test

### Failed tests with info from repair manual

- 100.2
  - This test has the identical setup as the 100.1 test. Signal LO is connected
    to the A/D circuit for ten readings and a min/max comparison is done to ensure
    that all readings are within 100 counts of each other. The test is to check
    for noise. The failures are the same as in test 100.1.

    Primary checks should be the references and power supplies. Secondary
    tests are the op amps of the integrator (U138 and U137), gain op amp U142,
    and the zero-cross comparator U145.

     If the 100 series tests fail, all other tests will be invalid.
- 301.1
  - +7V is generated by buffering REFHI with op amp U139. This +7V,
    which is used by the ohms circuit as a voltage reference, is switched by U133
    (/7V control line low) to op amp U123 which is a unity gain buffer.

    The +7V reference, now labeled REFBOOT, is routed through R272,
    Q109 (/HIOHM control line low), the 9.9MΩ half of R117, Q101, Q102,
    K101 (RESETK2 control line high), R304, Q104 (LOV control line high) to
    U113. The unity gain output of U113 (BUFCOM) then goes to the A/D MUX
    as in test 300.1 with a gain of ×1. Measure +7V at AD_IN.
- 301.2
  - This test is the same as 301.1 except that the +13.3V ohms reference is
    tested. The +13.3V reference is generated by the same circuit as the +7V ref-
    erence. 14V is routed through Q130 and then applied to a 1K/10K divider
    which is part of R271. The +13.3V divider output is routed through analog
    switch U133 (/.7V control line low) to op amp U123. The remainder of the
    path is the same as test 300.1.

    The expected voltage at AD_IN would be +13.3V except that at the source
    lead of Q104 (labeled SOURCE) there is a clamping circuit. Back-to-back
    11V zener diodes VR105 and VR106, and photo-coupler U107 clamp the
    voltage at the SOURCE node to about +12.4V. Measure +12.4V at AD_IN.
- 303.1
  - This test uses the ohms circuit. The +7V reference is switched to REF-
    BOOT by closing U133 (/7V line low). Q123 and Q125 are turned on by set-
    ting the OHMA control line high. +14V is applied directly to R194. Since
    Q123 is on, +7V appears on the other side of R194. As a result, the voltage
    drop across R194 (7.06kΩ) is 7V. A current of 1mA therefore flows through
    R194, Q125, Q119, CR114, and Q120 (/LOWOHM control line low).

    The current (labeled OHM) then flows through R304, U107, VR106, and
    VR105 to LO. The +7V reference is routed through Q104, to BUFCOM, and
    on to the A/D MUX with a gain of ×1. Measure +7V at AD_IN.
- 303.2
  - This test is similar to test 303.1. The +13.3V reference is switched to REF-
    BOOT again by closing U133 pins 6 to 7. Q124 and Q126 are turned on by
    setting the OHMA control line low. +14V is applied to R195, and since Q124
    is on, +13.3V appears on the other end of R195. The voltage across R195
    (70.6KΩ) is 0.7V. 10μA therefore flows through R195, Q126, Q119, CR114,
    and Q120 (/LOWOHM control line low).

    The current (labeled OHM) then flows through R304, U107, VR106, and
    VR105 to LO. This is again the clamping circuit described in test 301.2. The
    +12.4V reference is routed through Q104, to BUFCOM, and on to the A/D
    MUX with a gain of ×1. Measure +12.4V at AD_IN.
- 500.1
  - This test requires a 4-wire short at the input. The SLO node is the Sense
    LO jack on the front or rear panel. The 4-wire short connects SLO to LO. The
    0V signal at SLO is routed through R132, R139, R148, R163, and Q121 to
    U126, which is configured as a unity gain buffer. The 0V output of U126 is
    routed to S7 of U163 where it is switched to the A/D MUX (×1 gain). Mea-
    sure 0V at AD_IN.
- 500.2
  - This test requires a 4-wire short at the input. The SHI node is the Sense HI
    jack on the front or rear panel. The 4-wire short connects SHI to LO. The 0V
    signal at SHI is routed through R120, R124, R121, R125 and Q113 (4W con-
    trol line high) to U113 BUFCOM. As in previous tests, this signal goes to the
    A/D MUX which is configured for ×1 gain. Measure 0V at AD_IN.
- 600.1
  - This test requires a jumper wire from the INPUT HI jack to the AMPS
    jack on the front panel. The +7V reference is switched to the ohms circuit
    through U133. Q123 and Q125 are turned on to generate a 1mA current that
    is routed to the INPUT HI jack. The signal path for this 1mA current is from
    the +14V node through R194, Q125, Q119, Q120, K101 (pins 3 to 4) Q102,
    Q101, through the parallel combination of R115, L109, and R324, then to the
    INPUT HI jack.

    The jumper wire then routes the 1mA into the AMPS jack through K103
    (SETK3 control line high so that pins 3 to 4 and 7 to 8 are closed). This puts
    R205 in series with R158 for a total of 10.1Ω. The 1mA current through
    10.1Ω generates around 10mV which is sensed through S101 and R142 to
    the AMPSHUNT node. The AMPSHUNT signal is routed to S6 of U163
    where it is switched to the A/D MUX. The A/D MUX is configured for ×1
    gain. Measure 10mV at AD_IN.
- 600.2
  - This test requires a jumper wire from the INPUT HI jack to the AMPS
    jack on the front panel. The +7V reference is switched to the ohms circuit
    through U133. Q123 and Q125 are turned on to generate a 1mA current that
    is routed to the INPUT HI jack. The signal path for this 1mA current is from
    the +14V node through R194, Q125, Q119, Q120, K101 (pins 3 to 4) Q102,
    Q101, through the parallel combination of R115, L109, and R324, then to the
    INPUT HI jack.
    The jumper wire then routes the 1mA into the AMP jack and through
    K103 (SETK3 control line low so that pins 2 to 3 and 8 to 9 are closed). This
    bypasses R205 and routes the 1mA through the 0.1Ω ohm resistor (R158). A
    1mA current through 0.1Ω generates around 100μV which is sensed through
    S101 and R142 to the AMPSHUNT node.

    The AMPSHUNT signal is routed to S6 of U163 where it is switched to
    the A/D MUX. The A/D MUX is configured for ×100 gain. Since this is a
    very small voltage, trace resistance and circuit offsets greatly affect the ex-
    pected voltage of 10mV. This test is useful to detect the presence of the prop-
    er component operation and not so much their precision. Measure
    approximately 25mV at AD_IN.
- 601.2
  - The previous test sets up the circuit for this test. There is a routine in soft-
    ware that generates a waveform for the ACV tests. This is done by selecting
    the 7V reference by closing analog switch U133 (/7V controlline low). The
    reference is buffered by U123.

    Control line OHMA line is high turning Q123 and Q125 on which gener-
    ates a 1mA current source with R195, op amp U123, Q119, and associated
    circuitry. The /LOWOHM control line of U133 is switched to toggle Q120
    on and off to generate the 1mA AC current to the OHM node.

    This test current is then switched through K101 (pin 4 to 3). Control line
    /SETK2 is high and /RESETK2 is low. The test current goes through Q102,
    Q101, the parallel combination of R115, L109, and R324, then to the INPUT
    HI jack.

    The switched current signal is applied to the circuit described in the pre-
    vious test and a measurement is made. The input signal switching stops while
    the A/D is taking the reading, then continues when the measurement is com-
    plete. There are delays before the reading is taken to ensure that the ACV sec-
    tion and filters have enough time to reach a charged stable reading. For this
    test, the switched signal can be traced through the circuit described in the pre-
    vious test. Measure 84mV DC at A/D_IN.

## Reference

- <https://xdevs.com/fix/kei2000/>
- <https://www.eevblog.com/forum/repair/repair-old-keithley-2000-teardown-and-fix/>
- <https://www.eevblog.com/forum/repair/repaired-keithley-2000/>
- <https://www.eevblog.com/forum/repair/2x-keithley-2000-repair-log/>
- <https://www.eevblog.com/forum/repair/first-time-on-keithley-2000/>
- <https://forum.tek.com/viewtopic.php?f=32&t=6600>
